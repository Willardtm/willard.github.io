<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>凤凰金融量化投资比赛-预赛总结 | Klaus&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="写在最前这是第一次参加金融数据类型的比赛，最后能进入决赛真的特别开心，非常感谢团队里老师和队友的支持和帮助~然后说一下比赛最刺激的就是距离截止今天(最后一天)还有半小时左右的时候开始疯狂刷新页面，当时名次卡在20名，要是再掉下去一名就没有机会了，几乎就是刚刚十点钟上课铃响的时候还是稳在第20，可以说是很幸运了，最后，放一张截图留念一下。">
<meta name="keywords" content="大数据">
<meta property="og:type" content="article">
<meta property="og:title" content="凤凰金融量化投资比赛-预赛总结">
<meta property="og:url" content="http://yoursite.com/2018/05/25/凤凰金融/index.html">
<meta property="og:site_name" content="Klaus&#39;s Blog">
<meta property="og:description" content="写在最前这是第一次参加金融数据类型的比赛，最后能进入决赛真的特别开心，非常感谢团队里老师和队友的支持和帮助~然后说一下比赛最刺激的就是距离截止今天(最后一天)还有半小时左右的时候开始疯狂刷新页面，当时名次卡在20名，要是再掉下去一名就没有机会了，几乎就是刚刚十点钟上课铃响的时候还是稳在第20，可以说是很幸运了，最后，放一张截图留念一下。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://i.loli.net/2018/05/25/5b082d63b27e5.png">
<meta property="og:updated_time" content="2018-07-25T09:09:37.977Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="凤凰金融量化投资比赛-预赛总结">
<meta name="twitter:description" content="写在最前这是第一次参加金融数据类型的比赛，最后能进入决赛真的特别开心，非常感谢团队里老师和队友的支持和帮助~然后说一下比赛最刺激的就是距离截止今天(最后一天)还有半小时左右的时候开始疯狂刷新页面，当时名次卡在20名，要是再掉下去一名就没有机会了，几乎就是刚刚十点钟上课铃响的时候还是稳在第20，可以说是很幸运了，最后，放一张截图留念一下。">
<meta name="twitter:image" content="https://i.loli.net/2018/05/25/5b082d63b27e5.png">
  
    <link rel="alternate" href="/atom.xml" title="Klaus&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Klaus&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">MIA SAN MIA</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-凤凰金融" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/25/凤凰金融/" class="article-date">
  <time datetime="2018-05-25T15:26:34.000Z" itemprop="datePublished">2018-05-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      凤凰金融量化投资比赛-预赛总结
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
	  <!-- Table of Contents -->
		
		  <div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#写在最前"><span class="toc-number">1.</span> <span class="toc-text">写在最前</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#比赛感想"><span class="toc-number">2.</span> <span class="toc-text">比赛感想</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#技术总结"><span class="toc-number">3.</span> <span class="toc-text">技术总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#股票剔除"><span class="toc-number">3.1.</span> <span class="toc-text">股票剔除</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#因子筛选"><span class="toc-number">3.2.</span> <span class="toc-text">因子筛选</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#因子处理"><span class="toc-number">3.2.1.</span> <span class="toc-text">因子处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#相关性计算"><span class="toc-number">3.2.2.</span> <span class="toc-text">相关性计算</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#预测"><span class="toc-number">3.3.</span> <span class="toc-text">预测</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#写在最后"><span class="toc-number">4.</span> <span class="toc-text">写在最后</span></a></li></ol>
		  </div>
		
        <h1 id="写在最前"><a href="#写在最前" class="headerlink" title="写在最前"></a>写在最前</h1><p>这是第一次参加金融数据类型的比赛，最后能进入决赛真的特别开心，非常感谢团队里老师和队友的支持和帮助~<br>然后说一下比赛最刺激的就是距离截止今天(最后一天)还有半小时左右的时候开始疯狂刷新页面，当时名次卡在20名，要是再掉下去一名就没有机会了，几乎就是刚刚十点钟上课铃响的时候还是稳在第20，可以说是很幸运了，最后，放一张截图留念一下。<br><a id="more"></a></p>
<p><img src="https://i.loli.net/2018/05/25/5b082d63b27e5.png" alt=""></p>
<h1 id="比赛感想"><a href="#比赛感想" class="headerlink" title="比赛感想"></a>比赛感想</h1><p>凤凰金融总的比赛分为A榜和B榜，A榜一共四轮，B榜前20进入决赛。</p>
<p>最早接触这个比赛的时候刚好四月份左右，A榜的前两轮方向不太对，这个比赛和传统的投资选股策略不一样，没有每天的收盘价，最高价，最低价，换手率，以及明确的因子信息，我们手上仅有的只有上百(后面第四轮和B榜数据达到上千)支股票两年的收盘价和87个没有明确的指标。<br>最初的问题就是有以下3个：<br>1.股票剔除；<br>2.因子筛选；<br>3.预测。</p>
<p>具体的技术细节我会在第三部分记叙，最初的时候我们花一周左右的时间完成了股票剔除这个部分，但是一开始没有明确最后想进决赛这一点，所以我尝试了布林带这个东西，不过这个就涉及到技术指标选股，这个在选股中恰恰是比较忌讳的一点。</p>
<p>第三周的时候我把之前写过的剔除股票，布林带等等这些功能都模块化，最后实现直接运行后自动剔股保存并绘制图片，然而这个还是和因子没什么关系，我之前选取因子的时候算法没想好，导致收集分类完每只股票单独对应的因子几乎就是十几二十分钟左右，导致我一度放弃过这个方法。</p>
<p>团队里的老师们给过我们一周的时间去做一些相关的调研，那个时候我刚好看到了一本书叫做《华尔街45年》，不过对这次比赛没有起到实质作用，倒是我学了一点投资相关的简单的知识。</p>
<p>后来第五周我又花了一周时间学习了SVM相关的一些原理，发现还是比较偏分类使用，第六周最终明确下来要进决赛，我开始思考怎么预测的问题，最本质的问题依旧是怎么预测，但是仅有的只有87个因子，我重新查了一些资料，然后找到了多因子选股建模这个模型，里面确实涉及到SVM预测这一块，但是这里又确实需要对因子数据进行处理，应了那句话，“道路是曲折的，结果是不变的”，最终，我还是必须解决因子筛选这个问题，也幸好某天上课的时候我刚好来灵感想到了现在这个方法（见后面技术介绍），把时间压缩到了5-13s，最终完成建模。</p>
<p>预测效果最好的是在第三轮，因为当时数据量只有第四轮的1/3，失真还不是很严重，但是第四轮的时候分数就相对降低，直到B榜给出了更特殊的数据，导致这个预测算法的值再次降低（全部参赛队伍的分数均下降），由此可见，模型确实存在诸多问题需要改进，团队里的一个老师说过，我在参考文献的时候是抱着看SVM预测的目的去看，但是写文献的人又存在一定技术选股的方法，而我并没有发现这一点，这个观点我是认同的，第一次参加金融类型的比赛我确实存在很多方面的欠缺，对重点问题缺乏把握，也很感谢团队的老师每次都能给我们指出问题，提供我们改进的思路，也才会有最后的结果！</p>
<h1 id="技术总结"><a href="#技术总结" class="headerlink" title="技术总结"></a>技术总结</h1><p>这个框架是在Windows平台下使用Python3.6进行开发的，主要依托于Python下面的numpy，pandas，sklearn，scipy这几个库，同时第二版代码我做改进的时候摒弃了第一版过度追求自动化的心态，加入了一点人工的成分，同时也提高时间效率。</p>
<h2 id="股票剔除"><a href="#股票剔除" class="headerlink" title="股票剔除"></a>股票剔除</h2><p>股票剔除是建立在把所有股票的收盘价汇总的情况下进行剔除的，对收盘价进行处理后汇成一张总表后面直接调用。<br>剔除的股票遵循以下两个原则：<br>1.剔除两年内不定期停盘超过61天（三个月）的股票；<br>2.剔除连续涨停20天的股票。<br>但是这样处理后股票的数目下降接近一半，这里有一个需要注意的点就是可能删除股票的过程中也删除了得分较高的股票。</p>
<h2 id="因子筛选"><a href="#因子筛选" class="headerlink" title="因子筛选"></a>因子筛选</h2><p>因子这里分为两部分：因子处理与相关性计算。</p>
<h3 id="因子处理"><a href="#因子处理" class="headerlink" title="因子处理"></a>因子处理</h3><p>先说一下之前比较差的版本，我抽取了所有的股票名生成一个list，通过读取对应的股票名在488张表里面来分别读取每个因子，最后再单独汇总，这样确实很慢。<br>改进的版本就是，每次直接读取一行，也就是一天内87个因子所有的数据，这样就能提高效率。</p>
<h3 id="相关性计算"><a href="#相关性计算" class="headerlink" title="相关性计算"></a>相关性计算</h3><p>这个比较容易，直接调库函数计算即可，保留相关性大于0.6或者小于-0.6（负相关）的因子（这里可以不用做归一化处理）。<br>最后使用Python的字典存储每支股票对应的因子数。</p>
<h2 id="预测"><a href="#预测" class="headerlink" title="预测"></a>预测</h2><p>根据因子筛选中筛选出来的因子，使用sklearn下面的svm预测模型，以最后半年的数据来预测未来半年的走势，这里的参数用的是因子，但是存在一个问题，如果预测时间太长或者数据太大，数据容易失真。</p>
<h1 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h1><p>金融类型的比赛需要更多知识储备，同时需要学习更多的预测模型，下一次比赛之前可以进行更多的学习，可以通过多模型交叉的方式来获取最优解。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/25/凤凰金融/" data-id="ck911246f005rfwv4gg91kcxo" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/大数据/">大数据</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/07/06/CCF-CSP备考刷题记录/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          CCF CSP备考刷题记录
        
      </div>
    </a>
  
  
    <a href="/2018/05/21/算法分析A-1/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">算法分析A 全题解(5.21更新ing...)</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
    <h3 class="widget-title">联系方式</h3>
    <div class="widget">
	  <li><a>klausvon@163.com</a></li>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">目录</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AI-Learning/">AI_Learning</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CTF/">CTF</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/">HTML</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/NLP/">NLP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/NLP-知识图谱/">NLP,知识图谱</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/VQA/">VQA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/XSS漏洞学习/">XSS漏洞学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/代码审计/">代码审计</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/开发/">开发</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数学学习/">数学学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/漏洞学习/">漏洞学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/环境配置/">环境配置</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/神经网络/">神经网络</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CTF-Web/">CTF_Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NLP/">NLP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL-injection/">SQL_injection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VQA/">VQA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XXE/">XXE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/凸包算法/">凸包算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/大数据/">大数据</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/开发/">开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数学学习/">数学学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据挖掘/">数据挖掘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/环境配置/">环境配置</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/知识图谱/">知识图谱</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/神经网络/">神经网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法考核/">算法考核</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Algorithm/" style="font-size: 14.29px;">Algorithm</a> <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/CTF-Web/" style="font-size: 18.57px;">CTF_Web</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/NLP/" style="font-size: 20px;">NLP</a> <a href="/tags/PHP/" style="font-size: 10px;">PHP</a> <a href="/tags/Python/" style="font-size: 11.43px;">Python</a> <a href="/tags/SQL-injection/" style="font-size: 12.86px;">SQL_injection</a> <a href="/tags/VQA/" style="font-size: 10px;">VQA</a> <a href="/tags/XXE/" style="font-size: 10px;">XXE</a> <a href="/tags/凸包算法/" style="font-size: 10px;">凸包算法</a> <a href="/tags/大数据/" style="font-size: 11.43px;">大数据</a> <a href="/tags/开发/" style="font-size: 12.86px;">开发</a> <a href="/tags/数学学习/" style="font-size: 11.43px;">数学学习</a> <a href="/tags/数据挖掘/" style="font-size: 11.43px;">数据挖掘</a> <a href="/tags/环境配置/" style="font-size: 10px;">环境配置</a> <a href="/tags/知识图谱/" style="font-size: 17.14px;">知识图谱</a> <a href="/tags/神经网络/" style="font-size: 15.71px;">神经网络</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a> <a href="/tags/算法考核/" style="font-size: 10px;">算法考核</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/04/14/【统计自然语言处理】形式语言与自动机/">【统计自然语言处理】形式语言与自动机</a>
          </li>
        
          <li>
            <a href="/2020/04/09/【论文笔记】Preemptive-Information-Extraction-using-Unrestricted-Relation-Discovery/">【论文笔记】Preemptive Information Extraction using Unrestricted Relation Discovery</a>
          </li>
        
          <li>
            <a href="/2020/04/07/【论文笔记】Semantic-Compositionality-through-Recursive-Matrix-Vector-Spaces/">【论文笔记】Semantic Compositionality through Recursive Matrix-Vector Spaces</a>
          </li>
        
          <li>
            <a href="/2020/04/06/【论文笔记】Discovering-Relations-among-Named-Entities-from-Large-Corpora/">【论文笔记】Discovering Relations among Named Entities from Large Corpora</a>
          </li>
        
          <li>
            <a href="/2020/04/05/【论文笔记】Convolutional-Hierarchical-Attention-Network-for-Query-Focused-Video/">【论文笔记】Convolutional Hierarchical Attention Network for Query-Focused Video Summmarization</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div class="widget-wrap">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
	  <li><a href="http://030.im/" title="Misaka030">Misaka030</a></li>
      <li><a href="http://cicisite.me/" title="cici's blog">cici</a></li>
	  <li><a href="http://guoxiaobo.com/" title="Guo Sir">Guo Sir</a></li>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Klaus<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>